tosca_definitions_version: tosca_simple_yaml_1_3

imports:
- file: ./profile.yaml
  namespace_prefix: tf

topology_template:

  node_templates:

    siem_network:
      type:   tf:terraform_network
      properties:
        name : siemnet
        driver: bridge
      attributes:
        subnet: 192.168.80.0/20
        gateway: 192.168.80.1


    client:
      type: tf:terraform_host
      properties:
        name: client
        image: docker.elastic.co/elasticsearch/elasticsearch:7.4.0
        networks_advanced:
          name : "siemnet"
          ipv4_address : "192.168.80.3"
        ports: { 9200:9200 }
        env:
            "discovery.type": "single-node"
            "ES_JAVA_OPTS": "-Xms256m -Xmx256m"
            "cluster.routing.allocation.disk.threshold_enabled": "false"
            "xpack.security.enabled": "false"
            "xpack.monitoring.enabled": "false"
            "xpack.ml.enabled": "false"
            "xpack.graph.enabled": "false"
            "xpack.watcher.enabled": "false"
            "http.cors.enabled": "true"
            "http.cors.allow-origin": "*"
            "http.cors.allow-headers": "Authorization,X-Requested-With,Content-Type,Content-Length"
        volumes:
          - volume_name: es-data
            container_path: "/usr/share/elasticsearch/data"



